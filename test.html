<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>mcorp-ai.com</title>
  <link rel="canonical" href="https://mcorp-ai.com/test.html" />
  <style>
    :root { color-scheme: light dark; }
    html, body { height: 100%; }
    body { margin: 0; overflow: hidden; background: #fff; }

    .pdfFrame {
      width: 100vw;
      height: 100vh;
      border: 0;
      display: block;
      background: #fff;
    }

    audio { display: none; }

    #capture {
      position: fixed;
      inset: 0;
      background: transparent;
      z-index: 2147483647;
      outline: none;
    }
  </style>
</head>
<body>
  <iframe
    class="pdfFrame"
    title="PDF"
    src="Jeon_NobelPeace%20Prize%20nominee.pdf#toolbar=0&navpanes=0&scrollbar=1&view=FitH"
  ></iframe>

  <audio id="audio" preload="auto" playsinline>
    <source src="Jeon_NobelPeace%20Prize%20nominee.mp3" type="audio/mpeg" />
  </audio>

  <div id="capture" tabindex="0" aria-hidden="true"></div>

  <script>
    (function () {
      var audio = document.getElementById('audio');
      var capture = document.getElementById('capture');

      var started = false;
      var lastAttemptAt = 0;

      function removeCaptureLayer() {
        if (capture && capture.parentNode) {
          capture.parentNode.removeChild(capture);
        }
        capture = null;
      }

      function canAttemptNow() {
        var now = Date.now();
        if (now - lastAttemptAt < 250) return false;
        lastAttemptAt = now;
        return true;
      }

      function attemptPlay(label) {
        if (started) return;
        if (!canAttemptNow()) return;

        try { audio.muted = false; } catch (e) {}

        var p;
        try { p = audio.play(); } catch (e) { return; }

        if (p && typeof p.then === 'function') {
          p.then(function () {
            started = true;
          }).catch(function () {
          });
        }
      }

      function attemptPlayFromGesture(label) {
        removeCaptureLayer();
        try { audio.currentTime = 0; } catch (e) {}
        attemptPlay(label);
      }

      function onWheel(e) {
        if (e && typeof e.deltaY === 'number' && e.deltaY > 0) {
          attemptPlayFromGesture('wheel');
        }
      }

      function onKeydown() {
        attemptPlayFromGesture('keydown');
      }

      function onPointerDown() {
        attemptPlayFromGesture('pointerdown');
      }

      function onTouchStart() {
        attemptPlayFromGesture('touchstart');
      }

      setTimeout(function () {
        try { audio.currentTime = 0; } catch (e) {}
        attemptPlay('delay5s');
      }, 5000);

      var retryTimer = setInterval(function () {
        if (started) {
          clearInterval(retryTimer);
          return;
        }
        attemptPlay('retry');
      }, 1000);

      audio.addEventListener('playing', function () {
        started = true;
        clearInterval(retryTimer);
      });

      if (capture) {
        capture.addEventListener('wheel', onWheel, { passive: true });
        capture.addEventListener('keydown', onKeydown, { passive: true });
        capture.addEventListener('pointerdown', onPointerDown, { passive: true });
        capture.addEventListener('touchstart', onTouchStart, { passive: true });
      }

      window.addEventListener('wheel', onWheel, { passive: true });
      window.addEventListener('keydown', onKeydown, { passive: true });
      window.addEventListener('pointerdown', onPointerDown, { passive: true });
      window.addEventListener('touchstart', onTouchStart, { passive: true });

      try {
        if (capture) capture.focus({ preventScroll: true });
      } catch (e) {
        try { if (capture) capture.focus(); } catch (e2) {}
      }
    })();
  </script>
</body>
</html>
